<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Interactive Process State Transition Diagram</title>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #000;
      color: #e5e7eb;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      background: #111;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 0 25px rgba(0, 255, 255, 0.2);
      width: 100%;
      max-width: 1200px;
      text-align: center;
    }

    .title {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 20px;
      color: #fff;
    }

    .auto-btn {
      background: #0ff;
      color: #000;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 20px;
      box-shadow: 0 0 15px #0ff, 0 0 30px #0ff;
      transition: background 0.3s;
    }

    .input-container {
      margin-bottom: 20px;
    }

    input[type="text"] {
      padding: 8px;
      font-size: 16px;
      border-radius: 6px;
      border: 2px solid #0ff;
      background: #0a0a0a;
      color: #fff;
      outline: none;
    }

    .submit-btn {
      background: #16a34a;
      color: #000;
      border: none;
      padding: 8px 16px;
      font-size: 16px;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 0 15px #16a34a, 0 0 30px #16a34a;
      transition: background 0.3s;
    }

    .diagram {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 25px;
    }

    .state-circle {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(255,255,255,0.2);
      transition: transform 0.3s, border 0.3s;
      border: 3px solid transparent;
      font-weight: 600;
      cursor: pointer;
      position: relative;
      color: white;
    }

    .state-circle.active {
      transform: scale(1.15);
      border-color: #9333ea;
      box-shadow: 0 0 25px #9333ea, 0 0 40px #9333ea;
    }

    .tooltip {
      position: absolute;
      bottom: 120%;
      left: 50%;
      transform: translateX(-50%);
      background: #222;
      color: #fff;
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 12px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }

    .state-circle:hover .tooltip {
      opacity: 1;
    }

    .arrow-line {
      width: 80px;
      height: 4px;
      position: relative;
      opacity: 0;
      transition: opacity 0.4s ease-in-out;
      border-radius: 4px;
    }

    .arrow-line.active {
      opacity: 1;
    }

    .arrow-line::after {
      content: "▶";
      position: absolute;
      right: -18px;
      top: -12px;
      font-size: 22px;
      color: inherit;
    }

    #arrow-new-ready { background: #2563eb; color: #2563eb; box-shadow: 0 0 15px #2563eb; }
    #arrow-ready-running { background: #facc15; color: #facc15; box-shadow: 0 0 15px #facc15; }
    #arrow-running-blocked { background: #dc2626; color: #dc2626; box-shadow: 0 0 15px #dc2626; }
    #arrow-blocked-terminated { background: #16a34a; color: #16a34a; box-shadow: 0 0 15px #16a34a; }

    #new { background-color: #9ca3af; }
    #ready { background-color: #2563eb; }
    #running { background-color: #facc15; color: #000; }
    #blocked { background-color: #dc2626; }
    #terminated { background-color: #16a34a; }
  </style>
</head>
<body>
  <div class="container">
    <div class="title">⚙ Interactive Process State Transition Diagram</div>

    <button class="auto-btn" id="run-auto">▶ Start Process</button>

    <div class="input-container" style="display: none;">
      <input type="text" id="user-input" placeholder="Type 'yes' or 'no'" />
      <button class="submit-btn" id="submit-input">Submit</button>
    </div>

    <div class="diagram">
      <div class="state-circle" id="new">New<div class="tooltip">Process created</div></div>
      <div class="arrow-line" id="arrow-new-ready"></div>
      <div class="state-circle" id="ready">Ready<div class="tooltip">Waiting for CPU</div></div>
      <div class="arrow-line" id="arrow-ready-running"></div>
      <div class="state-circle" id="running">Running<div class="tooltip">Process executing</div></div>
      <div class="arrow-line" id="arrow-running-blocked"></div>
      <div class="state-circle" id="blocked">Blocked<div class="tooltip">Waiting for I/O</div></div>
      <div class="arrow-line" id="arrow-blocked-terminated"></div>
      <div class="state-circle" id="terminated">Terminated<div class="tooltip">Process finished</div></div>
    </div>
  </div>

  <script>
    const states = document.querySelectorAll('.state-circle');
    const arrows = {
      "new->ready": document.getElementById("arrow-new-ready"),
      "ready->running": document.getElementById("arrow-ready-running"),
      "running->blocked": document.getElementById("arrow-running-blocked"),
      "blocked->terminated": document.getElementById("arrow-blocked-terminated"),
    };

    const inputContainer = document.querySelector('.input-container');
    const userInputField = document.getElementById('user-input');
    const submitButton = document.getElementById('submit-input');

    function highlight(stateId) {
      states.forEach(s => s.classList.remove("active"));
      document.getElementById(stateId).classList.add("active");
    }

    document.getElementById("run-auto").onclick = () => {
      highlight('new');
      arrows["new->ready"].classList.add("active");

      setTimeout(() => {
        highlight('ready');
        arrows["ready->running"].classList.add("active");

        setTimeout(() => {
          highlight('running');
          inputContainer.style.display = 'block';
        }, 1500);

      }, 1500);
    };

    submitButton.onclick = () => {
      const userInput = userInputField.value.trim().toLowerCase();
      inputContainer.style.display = 'none';

      if (userInput === "yes") {
        arrows["running->blocked"].classList.add("active");

        setTimeout(() => {
          highlight('blocked');
          arrows["blocked->terminated"].classList.add("active");

          setTimeout(() => {
            highlight('terminated');
          }, 1500);

        }, 1500);

      } else {
        arrows["blocked->terminated"].classList.add("active");

        setTimeout(() => {
          highlight('terminated');
        }, 1500);
      }
    };
  </script>
</body>
</html>